# Accessibility (A11y)

## Contents
- POUR Principles
- Contrast Requirements
- Semantic HTML
- Focus Management
- Accessible Form Field
- Skip Link
- Live Regions
- Testing
- Checklist

## POUR Principles

### 1. Perceivable
- All images have meaningful alt text
- Decorative images use `alt=""` or `role="presentation"`
- Video has captions, audio has transcripts
- Color contrast meets standards

### 2. Operable
- All functionality keyboard accessible
- No keyboard traps
- Logical focus order
- Skip links provided

### 3. Understandable
- Language declared with `lang` attribute
- Consistent navigation
- Clear error messages with suggestions

### 4. Robust
- Valid HTML
- Proper ARIA when needed
- Status messages use live regions

## Contrast Requirements

| Level | Normal Text | Large Text | UI Components |
|-------|-------------|------------|---------------|
| AA    | 4.5:1       | 3:1        | 3:1           |
| AAA   | 7:1         | 4.5:1      | N/A           |

## Semantic HTML

```html
<header>
  <nav aria-label="Main navigation">
    <ul>
      <li><a href="/">Home</a></li>
    </ul>
  </nav>
</header>
<main>
  <h1>Page Title</h1>
  <section aria-labelledby="section-heading">
    <h2 id="section-heading">Section</h2>
  </section>
</main>
```

## Focus Management

```typescript
function Modal({ isOpen, onClose, children }: ModalProps) {
  useEffect(() => {
    if (!isOpen) return;

    const previousFocus = document.activeElement as HTMLElement;

    const handleEscape = (e: KeyboardEvent) => {
      if (e.key === "Escape") onClose();
    };

    document.addEventListener("keydown", handleEscape);
    return () => {
      document.removeEventListener("keydown", handleEscape);
      previousFocus?.focus();
    };
  }, [isOpen, onClose]);

  return (
    <div role="dialog" aria-modal="true" aria-labelledby="modal-title">
      {children}
    </div>
  );
}
```

## Accessible Form Field

```typescript
function TextField({ label, id, error, required, description }: Props) {
  const describedBy = [
    description && `${id}-description`,
    error && `${id}-error`,
  ].filter(Boolean).join(" ");

  return (
    <div>
      <label htmlFor={id}>
        {label}
        {required && <span aria-label="required"> *</span>}
      </label>
      {description && <p id={`${id}-description`}>{description}</p>}
      <input
        id={id}
        aria-describedby={describedBy || undefined}
        aria-invalid={error ? "true" : "false"}
        aria-required={required}
      />
      {error && <p id={`${id}-error`} role="alert">{error}</p>}
    </div>
  );
}
```

## Skip Link

```html
<a href="#main-content" className="skip-link">
  Skip to main content
</a>
<main id="main-content">...</main>
```

```css
.skip-link {
  position: absolute;
  left: -10000px;
}

.skip-link:focus {
  position: static;
}
```

## Live Regions

```typescript
function Toast({ message, type }: ToastProps) {
  return (
    <div
      role="status"
      aria-live={type === "error" ? "assertive" : "polite"}
    >
      {message}
    </div>
  );
}
```

## Testing

### Automated
- axe DevTools
- WAVE
- Lighthouse accessibility audit

### Manual
- Tab through entire page
- Screen reader: NVDA (Windows), VoiceOver (Mac)
- Test at 200% zoom
- Windows High Contrast Mode

## Checklist

- [ ] Semantic HTML used correctly
- [ ] All interactive elements keyboard accessible
- [ ] Focus visible with 3:1 contrast
- [ ] Color contrast 4.5:1 for text
- [ ] Images have alt text
- [ ] Forms have labels and error messages
- [ ] Dynamic content announced to screen readers
- [ ] Works at 200% zoom
- [ ] Respects `prefers-reduced-motion`
